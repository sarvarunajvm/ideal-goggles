[run]
source = src
omit =
    */tests/*
    */test_*
    */__pycache__/*
    */site-packages/*
    alembic/*
    scripts/*
    */migrations/*
    # Entry point - tested via integration tests
    src/main.py
    # __init__.py files - package markers
    src/__init__.py
    src/core/__init__.py
    src/api/__init__.py
    src/db/__init__.py
    src/db/migrations/__init__.py
    src/models/__init__.py
    src/services/__init__.py
    src/workers/__init__.py

[report]
exclude_lines =
    # Standard pragma
    pragma: no cover

    # Debug and development code
    def __repr__
    if self\.debug
    if 0:

    # Defensive assertions and not implemented
    raise AssertionError
    raise NotImplementedError

    # Entry point guards
    if __name__ == .__main__.:

    # Type checking blocks (not executed at runtime)
    if TYPE_CHECKING:

    # Abstract methods and protocols
    @(abc\.)?abstractmethod
    @overload
    class .*\bProtocol\):
    @runtime_checkable

    # Import error handling (defensive, tested separately)
    except ImportError:
    import faiss
    except ImportError.*faiss

    # Empty blocks
    pass
    \.\.\.

    # Background scheduler infinite loops (daemon threads)
    while True:
    def scheduler\(\):

ignore_errors = False
precision = 2

[html]
directory = htmlcov

[xml]
output = coverage.xml
