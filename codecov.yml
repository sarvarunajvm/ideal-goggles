codecov:
  require_ci_to_pass: false
  notify:
    wait_for_ci: true

coverage:
  precision: 2
  round: down
  range: "70...100"

  status:
    project:
      default:
        target: auto
        threshold: 1%
        informational: true
        only_pulls: false
      backend:
        target: auto
        threshold: 1%
        informational: true
        flags:
          - backend
      frontend:
        target: auto
        threshold: 1%
        informational: true
        flags:
          - frontend
    patch:
      default:
        target: auto
        threshold: 1%
        informational: true

flag_management:
  default_rules:
    carryforward: true
    statuses:
      - type: project
        target: auto
        threshold: 1%
      - type: patch
        target: auto

flags:
  backend:
    paths:
      - backend/
    carryforward: true
  frontend:
    paths:
      - frontend/src/
    carryforward: true
  e2e:
    paths:
      - func_tests/
    carryforward: false

comment:
  layout: "reach, diff, flags, files, footer"
  behavior: default
  require_changes: false
  require_base: false
  require_head: true

ignore:
  # Backend entry points and __init__ files
  - backend/src/main.py
  - backend/src/__init__.py
  - backend/src/core/__init__.py
  - backend/src/api/__init__.py
  - backend/src/db/__init__.py
  - backend/src/db/migrations/__init__.py
  - backend/src/models/__init__.py
  - backend/src/services/__init__.py
  - backend/src/workers/__init__.py

  # Frontend entry points and config
  - frontend/src/main.tsx
  - frontend/src/vite-env.d.ts
  - frontend/src/setupTests.ts
  - frontend/electron/

  # Test files
  - "**/*test*"
  - "**/*spec*"
  - "**/tests/"
  - "**/__tests__/"

  # Build and config files
  - "**/dist/"
  - "**/build/"
  - "**/*.config.*"
  - "**/vite.config.ts"
  - "**/jest.config.js"
